
> @buttress/buttress-js@3.0.0-1 test:e2e
> NODE_ENV=test node test/before-e2e.js && NODE_ENV=test mocha --recursive --bail test/e2e/**/*

node-env-obj: Loaded /home/tom/Projects/Lighten/buttress-js/.test.env into environment variables.
ðŸ¤ Connected to the datastore: mongodb://bjs-main:langdale@127.0.0.1
ðŸ“– Found 7 collections.
âœ”ï¸ Dropping all non-core collections
âœ”ï¸ Cleaning up apps collection
âœ”ï¸ Cleaning up tokens collection
Datastore clean up complete! ðŸ¥³ðŸ¥³

node-env-obj: Loaded /home/tom/Projects/Lighten/buttress-js/.test.env into environment variables.


  Data Sharing
BEFORE2 START
BEFORE2 END
    Creating a agreement
      âœ” Should register a data sharing agreement between app1 and app2
      âœ” Should register a data sharing agreement between app2 and app1 & activate it (40ms)
      âœ” Should update app2 schema to reference cars collection from app1 (512ms)
      âœ” Should be able to GET cars from App2 which will use data sharing to retrive data from App1 (43ms)
    Handling mutiple agreement sources
      âœ” Should register a data sharing agreement between app3 and app2
      âœ” Should register a data sharing agreement between app2 and app1 & activate it
      âœ” Should update app2 schema to reference cars collection from app1 & app2 (512ms)
      âœ” Should be able to GET cars from App2 which will use data sharing to retrive data from App1 & App3 combined (68ms)
AFFTER2 START
There are 87 handle(s) keeping the process running

# DNSCHANNEL
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/connection_string.js:4 - const dns = require("dns");
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:6      - const connection_string_1 = require("./connection_string");
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/change_stream.js:10    - const mongo_client_1 = require("./mongo_client");
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/index.js:9             - const change_stream_1 = require("./change_stream");
/home/tom/Projects/Lighten/buttress-js/dist/routes/index.js:24                         - const ObjectId = require('mongodb').ObjectId;
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:36                       - const Routes = require('./routes');
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:24           - const BootstrapRest = require('../../../dist/bootstrap-rest');

# TCPWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connect.js:296         - socket = net.createConnection(parseConnectOptions(options));
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connect.js:31          - makeConnection({ ...options, existingSocket: undefined }, (err, socket) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:345 - (0, connect_1.connect)(connectOptions, (err, connection) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:446 - this.createConnection((err, connection) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:168 - process.nextTick(() => this.processWaitQueue());

# TCPWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/index.js:196                            - this.stream = net.createConnection(this.connection_options);
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/index.js:121                            - this.create_stream();
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/index.js:1023                           - return new RedisClient(unifyOptions.apply(null, arguments));
/home/tom/Projects/Lighten/buttress-js/node_modules/node-redis-pubsub/lib/node-redis-pubsub.js:13 - client  = redis.createClient(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-redis-pubsub/lib/node-redis-pubsub.js:45 - this.emitter = initClient(options);
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:73                                  - this._nrp = new NRP(Config.redis);
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:83                      - await REST_PROCESS.init();

# TCPWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/index.js:196                            - this.stream = net.createConnection(this.connection_options);
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/index.js:121                            - this.create_stream();
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/index.js:1023                           - return new RedisClient(unifyOptions.apply(null, arguments));
/home/tom/Projects/Lighten/buttress-js/node_modules/node-redis-pubsub/lib/node-redis-pubsub.js:13 - client  = redis.createClient(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-redis-pubsub/lib/node-redis-pubsub.js:51 - this.receiver = initClient(options);
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:73                                  - this._nrp = new NRP(Config.redis);
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:83                      - await REST_PROCESS.init();

# TCPWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connect.js:296         - socket = net.createConnection(parseConnectOptions(options));
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connect.js:31          - makeConnection({ ...options, existingSocket: undefined }, (err, socket) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:345 - (0, connect_1.connect)(connectOptions, (err, connection) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:446 - this.createConnection((err, connection) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:168 - process.nextTick(() => this.processWaitQueue());

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:37             - const req = await fetch(`${opts.url}?token=${token}`, opts);
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:42             - const createApp = async (name, apiPath, token) => await bjsReq({
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:99             - testEnv.apps.app1 = await createApp('Test App 1', 'test-app-1');

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TCPWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connect.js:296         - socket = net.createConnection(parseConnectOptions(options));
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connect.js:31          - makeConnection({ ...options, existingSocket: undefined }, (err, socket) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:345 - (0, connect_1.connect)(connectOptions, (err, connection) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:446 - this.createConnection((err, connection) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:168 - process.nextTick(() => this.processWaitQueue());

# TCPWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connect.js:296         - socket = net.createConnection(parseConnectOptions(options));
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connect.js:31          - makeConnection({ ...options, existingSocket: undefined }, (err, socket) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:345 - (0, connect_1.connect)(connectOptions, (err, connection) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:446 - this.createConnection((err, connection) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:168 - process.nextTick(() => this.processWaitQueue());

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:37             - const req = await fetch(`${opts.url}?token=${token}`, opts);
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:51             - const updateSchema = async (schema, token) => bjsReq({
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:100            - testEnv.apps.app1.schema = await updateSchema([carsSchema], testEnv.apps.app1.token);

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:37             - const req = await fetch(`${opts.url}?token=${token}`, opts);
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:65             - const [car] = await bjsReq({
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:102            - await createCar(testEnv.apps.app1, 'A red car');

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:37             - const req = await fetch(`${opts.url}?token=${token}`, opts);
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:42             - const createApp = async (name, apiPath, token) => await bjsReq({
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:105            - testEnv.apps.app2 = await createApp('Test App 2', 'test-app-2');

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TCPWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connect.js:296         - socket = net.createConnection(parseConnectOptions(options));
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connect.js:31          - makeConnection({ ...options, existingSocket: undefined }, (err, socket) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:345 - (0, connect_1.connect)(connectOptions, (err, connection) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:446 - this.createConnection((err, connection) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:168 - process.nextTick(() => this.processWaitQueue());

# TCPWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connect.js:296         - socket = net.createConnection(parseConnectOptions(options));
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connect.js:31          - makeConnection({ ...options, existingSocket: undefined }, (err, socket) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:345 - (0, connect_1.connect)(connectOptions, (err, connection) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:446 - this.createConnection((err, connection) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:168 - process.nextTick(() => this.processWaitQueue());

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:37             - const req = await fetch(`${opts.url}?token=${token}`, opts);
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:42             - const createApp = async (name, apiPath, token) => await bjsReq({
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:108            - testEnv.apps.app3 = await createApp('Test App 3', 'test-app-3');

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:37             - const req = await fetch(`${opts.url}?token=${token}`, opts);
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:51             - const updateSchema = async (schema, token) => bjsReq({
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:109            - testEnv.apps.app3.schema = await updateSchema([carsSchema], testEnv.apps.app3.token);

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:37             - const req = await fetch(`${opts.url}?token=${token}`, opts);
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:65             - const [car] = await bjsReq({
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:111            - await createCar(testEnv.apps.app3, 'A green car');

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:37             - const req = await fetch(`${opts.url}?token=${token}`, opts);
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:57             - const registerDataSharing = async (agreement, token) => bjsReq({
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:127            - const agreement = await registerDataSharing({

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:37             - const req = await fetch(`${opts.url}?token=${token}`, opts);
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:57             - const registerDataSharing = async (agreement, token) => bjsReq({
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:157            - const agreement = await registerDataSharing({
# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:168      - return fetch(url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/app.js:37          - return this._request('get', 'schema', options);
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/buttressjs.js:110  - .then(() => this.getCollection('app').getSchema())
/home/tom/Projects/Lighten/buttress-js/dist/datastore/adapters/buttress.js:55            - await this.connection.init({
/home/tom/Projects/Lighten/buttress-js/dist/routes/api/app-data-sharing.js:49            - await buttressAdapter.connect();
/home/tom/Projects/Lighten/buttress-js/dist/routes/api/app-data-sharing.js:202           - return await activateDataSharing(dataSharing, result.token._id);
/home/tom/Projects/Lighten/buttress-js/dist/routes/route.js:145                          - const result = await this._exec(req, res, validate);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468             - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437             - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10     - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:168          - return fetch(url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/app-data-sharing.js:59 - return this._request('post', `activate`, options);
/home/tom/Projects/Lighten/buttress-js/dist/datastore/adapters/buttress.js:99                - return await this.connection.AppDataSharing.activate(registrationToken, newToken);
/home/tom/Projects/Lighten/buttress-js/dist/routes/api/app-data-sharing.js:52                - const activationResult = await buttressAdapter.activateDataSharing(dataSharing.remoteApp.token, newToken);
/home/tom/Projects/Lighten/buttress-js/dist/routes/api/app-data-sharing.js:202               - return await activateDataSharing(dataSharing, result.token._id);
/home/tom/Projects/Lighten/buttress-js/dist/routes/route.js:145                              - const result = await this._exec(req, res, validate);

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:168      - return fetch(url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/app.js:37          - return this._request('get', 'schema', options);
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/buttressjs.js:110  - .then(() => this.getCollection('app').getSchema())
/home/tom/Projects/Lighten/buttress-js/dist/datastore/adapters/buttress.js:55            - await this.connection.init({
/home/tom/Projects/Lighten/buttress-js/dist/routes/api/app-data-sharing.js:71            - await datastore.connect();
/home/tom/Projects/Lighten/buttress-js/dist/routes/api/app-data-sharing.js:202           - return await activateDataSharing(dataSharing, result.token._id);
/home/tom/Projects/Lighten/buttress-js/dist/routes/route.js:145                          - const result = await this._exec(req, res, validate);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:37             - const req = await fetch(`${opts.url}?token=${token}`, opts);
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:51             - const updateSchema = async (schema, token) => bjsReq({
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:184            - testEnv.apps.app2.schema = await updateSchema([{

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:168      - return fetch(url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/app.js:37          - return this._request('get', 'schema', options);
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/buttressjs.js:110  - .then(() => this.getCollection('app').getSchema())
/home/tom/Projects/Lighten/buttress-js/dist/datastore/adapters/buttress.js:55            - await this.connection.init({
/home/tom/Projects/Lighten/buttress-js/dist/model/type/remote.js:54                      - await model.adapter.connect();
/home/tom/Projects/Lighten/buttress-js/dist/model/index.js:211                           - await this.models[modelName].initAdapter(mainDatastore, datastores);
/home/tom/Projects/Lighten/buttress-js/dist/model/index.js:109                           - await this._initSchemaModel(app, schema, datastore);
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:237                        - await Model.initSchema(payload.appId);
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:229                        - await this.handleProcessMessage(payload);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:168      - return fetch(url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/app.js:37          - return this._request('get', 'schema', options);
/home/tom/Projects/Lighten/buttress-js/dist/datastore/adapters/buttress.js:90            - return await this.connection.App.getSchema({
/home/tom/Projects/Lighten/buttress-js/dist/model/type/remote.js:59                      - const remoteSchemas = await model.adapter.getSchema([this.schemaData.name]);
/home/tom/Projects/Lighten/buttress-js/dist/model/index.js:211                           - await this.models[modelName].initAdapter(mainDatastore, datastores);
/home/tom/Projects/Lighten/buttress-js/dist/model/index.js:109                           - await this._initSchemaModel(app, schema, datastore);
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:237                        - await Model.initSchema(payload.appId);
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:229                        - await this.handleProcessMessage(payload);

# Timeout
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/monitor.js:274 - this[kMonitorId] = (0, timers_1.setTimeout)(() => measureRoundTripTime(this, options), heartbeatFrequencyMS);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/monitor.js:175 - monitor[kRTTPinger] = new RTTPinger(monitor[kCancellationToken], Object.assign({ heartbeatFrequencyMS: monitor.options.heartbeatFrequencyMS }, monitor.connectOptions));
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/monitor.js:237 - checkServer(monitor, (err, hello) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/utils.js:652        - fn(err => {

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:37             - const req = await fetch(`${opts.url}?token=${token}`, opts);
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:206            - const cars = await bjsReq({

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:168      - return fetch(url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:318      - return this._request('search', null, options);
/home/tom/Projects/Lighten/buttress-js/dist/datastore/adapters/buttress.js:230           - const result = await this.collection.search(query, limit, skip, sort, {
/home/tom/Projects/Lighten/buttress-js/dist/model/type/remote.js:180                     - sources.push(await remote.find(query, excludes, limit, skip, sort, project));
/home/tom/Projects/Lighten/buttress-js/dist/routes/route.js:145                          - const result = await this._exec(req, res, validate);

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:37             - const req = await fetch(`${opts.url}?token=${token}`, opts);
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:57             - const registerDataSharing = async (agreement, token) => bjsReq({
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:264            - const agreement = await registerDataSharing({

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:37             - const req = await fetch(`${opts.url}?token=${token}`, opts);
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:57             - const registerDataSharing = async (agreement, token) => bjsReq({
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:294            - const agreement = await registerDataSharing({

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:168      - return fetch(url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/app.js:37          - return this._request('get', 'schema', options);
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/buttressjs.js:110  - .then(() => this.getCollection('app').getSchema())
/home/tom/Projects/Lighten/buttress-js/dist/datastore/adapters/buttress.js:55            - await this.connection.init({
/home/tom/Projects/Lighten/buttress-js/dist/routes/api/app-data-sharing.js:49            - await buttressAdapter.connect();
/home/tom/Projects/Lighten/buttress-js/dist/routes/api/app-data-sharing.js:202           - return await activateDataSharing(dataSharing, result.token._id);
/home/tom/Projects/Lighten/buttress-js/dist/routes/route.js:145                          - const result = await this._exec(req, res, validate);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468             - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437             - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10     - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:168          - return fetch(url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/app-data-sharing.js:59 - return this._request('post', `activate`, options);
/home/tom/Projects/Lighten/buttress-js/dist/datastore/adapters/buttress.js:99                - return await this.connection.AppDataSharing.activate(registrationToken, newToken);
/home/tom/Projects/Lighten/buttress-js/dist/routes/api/app-data-sharing.js:52                - const activationResult = await buttressAdapter.activateDataSharing(dataSharing.remoteApp.token, newToken);
/home/tom/Projects/Lighten/buttress-js/dist/routes/api/app-data-sharing.js:202               - return await activateDataSharing(dataSharing, result.token._id);
/home/tom/Projects/Lighten/buttress-js/dist/routes/route.js:145                              - const result = await this._exec(req, res, validate);

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:168      - return fetch(url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/app.js:37          - return this._request('get', 'schema', options);
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/buttressjs.js:110  - .then(() => this.getCollection('app').getSchema())
/home/tom/Projects/Lighten/buttress-js/dist/datastore/adapters/buttress.js:55            - await this.connection.init({
/home/tom/Projects/Lighten/buttress-js/dist/routes/api/app-data-sharing.js:71            - await datastore.connect();
/home/tom/Projects/Lighten/buttress-js/dist/routes/api/app-data-sharing.js:202           - return await activateDataSharing(dataSharing, result.token._id);
/home/tom/Projects/Lighten/buttress-js/dist/routes/route.js:145                          - const result = await this._exec(req, res, validate);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:37             - const req = await fetch(`${opts.url}?token=${token}`, opts);
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:51             - const updateSchema = async (schema, token) => bjsReq({
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:321            - testEnv.apps.app2.schema = await updateSchema([{

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:168      - return fetch(url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/app.js:37          - return this._request('get', 'schema', options);
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/buttressjs.js:110  - .then(() => this.getCollection('app').getSchema())
/home/tom/Projects/Lighten/buttress-js/dist/datastore/adapters/buttress.js:55            - await this.connection.init({
/home/tom/Projects/Lighten/buttress-js/dist/model/type/remote.js:54                      - await model.adapter.connect();
/home/tom/Projects/Lighten/buttress-js/dist/model/index.js:211                           - await this.models[modelName].initAdapter(mainDatastore, datastores);
/home/tom/Projects/Lighten/buttress-js/dist/model/index.js:109                           - await this._initSchemaModel(app, schema, datastore);
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:237                        - await Model.initSchema(payload.appId);
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:229                        - await this.handleProcessMessage(payload);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:168      - return fetch(url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/app.js:37          - return this._request('get', 'schema', options);
/home/tom/Projects/Lighten/buttress-js/dist/datastore/adapters/buttress.js:90            - return await this.connection.App.getSchema({
/home/tom/Projects/Lighten/buttress-js/dist/model/type/remote.js:59                      - const remoteSchemas = await model.adapter.getSchema([this.schemaData.name]);
/home/tom/Projects/Lighten/buttress-js/dist/model/index.js:211                           - await this.models[modelName].initAdapter(mainDatastore, datastores);
/home/tom/Projects/Lighten/buttress-js/dist/model/index.js:109                           - await this._initSchemaModel(app, schema, datastore);
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:237                        - await Model.initSchema(payload.appId);
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:229                        - await this.handleProcessMessage(payload);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:168      - return fetch(url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/app.js:37          - return this._request('get', 'schema', options);
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/buttressjs.js:110  - .then(() => this.getCollection('app').getSchema())
/home/tom/Projects/Lighten/buttress-js/dist/datastore/adapters/buttress.js:55            - await this.connection.init({
/home/tom/Projects/Lighten/buttress-js/dist/model/type/remote.js:54                      - await model.adapter.connect();
/home/tom/Projects/Lighten/buttress-js/dist/model/index.js:211                           - await this.models[modelName].initAdapter(mainDatastore, datastores);
/home/tom/Projects/Lighten/buttress-js/dist/model/index.js:109                           - await this._initSchemaModel(app, schema, datastore);
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:237                        - await Model.initSchema(payload.appId);
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:229                        - await this.handleProcessMessage(payload);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:168      - return fetch(url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/app.js:37          - return this._request('get', 'schema', options);
/home/tom/Projects/Lighten/buttress-js/dist/datastore/adapters/buttress.js:90            - return await this.connection.App.getSchema({
/home/tom/Projects/Lighten/buttress-js/dist/model/type/remote.js:59                      - const remoteSchemas = await model.adapter.getSchema([this.schemaData.name]);
/home/tom/Projects/Lighten/buttress-js/dist/model/index.js:211                           - await this.models[modelName].initAdapter(mainDatastore, datastores);
/home/tom/Projects/Lighten/buttress-js/dist/model/index.js:109                           - await this._initSchemaModel(app, schema, datastore);
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:237                        - await Model.initSchema(payload.appId);
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:229                        - await this.handleProcessMessage(payload);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:37             - const req = await fetch(`${opts.url}?token=${token}`, opts);
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:347            - const cars = await bjsReq({

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:168      - return fetch(url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:318      - return this._request('search', null, options);
/home/tom/Projects/Lighten/buttress-js/dist/datastore/adapters/buttress.js:230           - const result = await this.collection.search(query, limit, skip, sort, {
/home/tom/Projects/Lighten/buttress-js/dist/model/type/remote.js:180                     - sources.push(await remote.find(query, excludes, limit, skip, sort, project));
/home/tom/Projects/Lighten/buttress-js/dist/routes/route.js:145                          - const result = await this._exec(req, res, validate);

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:168      - return fetch(url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:318      - return this._request('search', null, options);
/home/tom/Projects/Lighten/buttress-js/dist/datastore/adapters/buttress.js:230           - const result = await this.collection.search(query, limit, skip, sort, {
/home/tom/Projects/Lighten/buttress-js/dist/model/type/remote.js:180                     - sources.push(await remote.find(query, excludes, limit, skip, sort, project));
/home/tom/Projects/Lighten/buttress-js/dist/routes/route.js:145                          - const result = await this._exec(req, res, validate);

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TickObject
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:116 - console.log('AFFTER2 START');

# TickObject
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:116             - this._restServer.close((err) => (err) ? process.exit(1) : Logging.logSilly(`Express server closed`));
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:120 - await REST_PROCESS.clean();

# TickObject
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/index.js:950                             - this.should_buffer = !this.stream.write(data);
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/index.js:886                             - this.write(command_str);
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/lib/individualCommands.js:105            - var backpressure_indicator = this.internal_send_command(new Command('quit', [], quit_callback(this, callback)));
/home/tom/Projects/Lighten/buttress-js/node_modules/node-redis-pubsub/lib/node-redis-pubsub.js:126 - this.emitter.quit();
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:122                                  - this._nrp.quit();
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:120                      - await REST_PROCESS.clean();

# TickObject
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/index.js:950                             - this.should_buffer = !this.stream.write(data);
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/index.js:886                             - this.write(command_str);
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/lib/individualCommands.js:105            - var backpressure_indicator = this.internal_send_command(new Command('quit', [], quit_callback(this, callback)));
/home/tom/Projects/Lighten/buttress-js/node_modules/node-redis-pubsub/lib/node-redis-pubsub.js:127 - this.receiver.quit();
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:122                                  - this._nrp.quit();
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:120                      - await REST_PROCESS.clean();

# Timeout
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:290                - waitQueueMember.timer = (0, timers_1.setTimeout)(() => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/operations/execute_operation.js:154 - topology.selectServer(selector, serverSelectionOptions, (error, server) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/operations/execute_operation.js:69  - executeWithServerSelection(topology, session, operation, (error, result) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/utils.js:357                        - wrapper((err, res) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/operations/execute_operation.js:16  - return (0, utils_1.maybePromise)(callback, callback => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/db.js:162                           - return (0, execute_operation_1.executeOperation)(this.s.client, new run_command_1.RunCommandOperation(this, command, options !== null && options !== void 0 ? options : {}), callback);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:179                 - .command({ endSessions }, { readPreference: read_preference_1.ReadPreference.primaryPreferred, noResponse: true })

# TickObject
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:168         - process.nextTick(() => this.processWaitQueue());
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:291         - this.checkOut((err, conn) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/server.js:204                  - this.s.pool.withConnection(conn, (err, conn, cb) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/operations/command.js:91            - server.command(this.ns, cmd, options, callback);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/operations/run_command.js:15        - this.executeCommand(server, session, command, callback);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/operations/execute_operation.js:182 - return operation.execute(server, session, callback);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:594                - waitQueueMember.callback(undefined, selectedServer);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:298                - processWaitQueue(this);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/operations/execute_operation.js:154 - topology.selectServer(selector, serverSelectionOptions, (error, server) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/operations/execute_operation.js:69  - executeWithServerSelection(topology, session, operation, (error, result) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/utils.js:357                        - wrapper((err, res) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/operations/execute_operation.js:16  - return (0, utils_1.maybePromise)(callback, callback => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/db.js:162                           - return (0, execute_operation_1.executeOperation)(this.s.client, new run_command_1.RunCommandOperation(this, command, options !== null && options !== void 0 ? options : {}), callback);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:179                 - .command({ endSessions }, { readPreference: read_preference_1.ReadPreference.primaryPreferred, noResponse: true })

# TickObject
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/message_stream.js:47   - this.push(Array.isArray(data) ? Buffer.concat(data) : data);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection.js:456      - conn[kMessageStream].writeCommand(command, operationDescription);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection.js:299      - write(this, message, commandOptions, callback);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/server.js:210          - conn.command(ns, cmd, finalOptions, makeOperationHandler(this, conn, cmd, finalOptions, (error, response) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:293 - fn(err, conn, (fnErr, result) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:435 - waitQueueMember.callback(undefined, connection);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:168 - process.nextTick(() => this.processWaitQueue());

# TickObject
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/message_stream.js:47   - this.push(Array.isArray(data) ? Buffer.concat(data) : data);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection.js:456      - conn[kMessageStream].writeCommand(command, operationDescription);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection.js:299      - write(this, message, commandOptions, callback);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/server.js:210          - conn.command(ns, cmd, finalOptions, makeOperationHandler(this, conn, cmd, finalOptions, (error, response) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:293 - fn(err, conn, (fnErr, result) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:435 - waitQueueMember.callback(undefined, connection);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:168 - process.nextTick(() => this.processWaitQueue());

# TickObject
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:189 - process.nextTick(() => this.processWaitQueue());
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:303 - this.checkIn(conn);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/server.js:212          - cb(error, response);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/server.js:287          - return callback(new error_1.MongoUnexpectedServerResponseError('Empty response with no error'));
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection.js:466      - operationDescription.cb();
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection.js:299      - write(this, message, commandOptions, callback);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/server.js:210          - conn.command(ns, cmd, finalOptions, makeOperationHandler(this, conn, cmd, finalOptions, (error, response) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:293 - fn(err, conn, (fnErr, result) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:435 - waitQueueMember.callback(undefined, connection);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:168 - process.nextTick(() => this.processWaitQueue());

# TickObject
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection.js:237 - this[kStream].destroy();
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/monitor.js:140    - (_c = monitor[kConnection]) === null || _c === void 0 ? void 0 : _c.destroy({ force: true });
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/monitor.js:126    - resetMonitorState(this);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/server.js:128     - (_a = this[kMonitor]) === null || _a === void 0 ? void 0 : _a.close();
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:446   - server.destroy(options, () => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:227   - return (0, util_1.promisify)(destroyServer)(server, this, options);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:226   - const destroyedServers = Array.from(this.s.servers.values(), server => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:190    - topology.close({ force }, error => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:189    - return new Promise((resolve, reject) => {

# TickObject
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection.js:244      - this[kStream].end(() => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:255 - conn.destroy(options, cb);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/utils.js:448                - eachFn(arr[idx], eachCallback);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:253 - (0, utils_1.eachAsync)(this[kConnections].toArray(), (conn, cb) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/server.js:130          - this.s.pool.close(options, err => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:446        - server.destroy(options, () => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:227        - return (0, util_1.promisify)(destroyServer)(server, this, options);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:226        - const destroyedServers = Array.from(this.s.servers.values(), server => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:190         - topology.close({ force }, error => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:189         - return new Promise((resolve, reject) => {

# TickObject
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection.js:244      - this[kStream].end(() => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:255 - conn.destroy(options, cb);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/utils.js:448                - eachFn(arr[idx], eachCallback);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:253 - (0, utils_1.eachAsync)(this[kConnections].toArray(), (conn, cb) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/server.js:130          - this.s.pool.close(options, err => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:446        - server.destroy(options, () => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:227        - return (0, util_1.promisify)(destroyServer)(server, this, options);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:226        - const destroyedServers = Array.from(this.s.servers.values(), server => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:190         - topology.close({ force }, error => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:189         - return new Promise((resolve, reject) => {

# TickObject
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection.js:244      - this[kStream].end(() => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:255 - conn.destroy(options, cb);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/utils.js:448                - eachFn(arr[idx], eachCallback);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:253 - (0, utils_1.eachAsync)(this[kConnections].toArray(), (conn, cb) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/server.js:130          - this.s.pool.close(options, err => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:446        - server.destroy(options, () => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:227        - return (0, util_1.promisify)(destroyServer)(server, this, options);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:226        - const destroyedServers = Array.from(this.s.servers.values(), server => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:190         - topology.close({ force }, error => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:189         - return new Promise((resolve, reject) => {

# TickObject
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection.js:244      - this[kStream].end(() => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:255 - conn.destroy(options, cb);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/utils.js:448                - eachFn(arr[idx], eachCallback);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:253 - (0, utils_1.eachAsync)(this[kConnections].toArray(), (conn, cb) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/server.js:130          - this.s.pool.close(options, err => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:446        - server.destroy(options, () => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:227        - return (0, util_1.promisify)(destroyServer)(server, this, options);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:226        - const destroyedServers = Array.from(this.s.servers.values(), server => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:190         - topology.close({ force }, error => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:189         - return new Promise((resolve, reject) => {

# TickObject
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection.js:244      - this[kStream].end(() => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:255 - conn.destroy(options, cb);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/utils.js:448                - eachFn(arr[idx], eachCallback);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:253 - (0, utils_1.eachAsync)(this[kConnections].toArray(), (conn, cb) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/server.js:130          - this.s.pool.close(options, err => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:446        - server.destroy(options, () => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:227        - return (0, util_1.promisify)(destroyServer)(server, this, options);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:226        - const destroyedServers = Array.from(this.s.servers.values(), server => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:190         - topology.close({ force }, error => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:189         - return new Promise((resolve, reject) => {

# TickObject
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection.js:244      - this[kStream].end(() => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:255 - conn.destroy(options, cb);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/utils.js:448                - eachFn(arr[idx], eachCallback);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:253 - (0, utils_1.eachAsync)(this[kConnections].toArray(), (conn, cb) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/server.js:130          - this.s.pool.close(options, err => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:446        - server.destroy(options, () => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:227        - return (0, util_1.promisify)(destroyServer)(server, this, options);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:226        - const destroyedServers = Array.from(this.s.servers.values(), server => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:190         - topology.close({ force }, error => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:189         - return new Promise((resolve, reject) => {

# SHUTDOWNWRAP
(unknown stack trace)

# SHUTDOWNWRAP
(unknown stack trace)

# SHUTDOWNWRAP
(unknown stack trace)

# SHUTDOWNWRAP
(unknown stack trace)

# SHUTDOWNWRAP
(unknown stack trace)

# SHUTDOWNWRAP
(unknown stack trace)

# TickObject
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/lib/individualCommands.js:96 - self.stream.destroy();
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/index.js:655                 - command_obj.callback(null, reply);
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/index.js:753                 - normal_reply(this, reply);
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/index.js:138                 - self.return_reply(data);
/home/tom/Projects/Lighten/buttress-js/node_modules/redis-parser/lib/parser.js:544     - this.returnReply(response)
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/index.js:219                 - self.reply_parser.execute(buffer_from_socket);

# TickObject
(unknown stack trace)

# TickObject
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/lib/individualCommands.js:96 - self.stream.destroy();
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/index.js:655                 - command_obj.callback(null, reply);
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/index.js:760                 - normal_reply(this, reply);
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/index.js:138                 - self.return_reply(data);
/home/tom/Projects/Lighten/buttress-js/node_modules/redis-parser/lib/parser.js:544     - this.returnReply(response)
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/index.js:219                 - self.reply_parser.execute(buffer_from_socket);

# TickObject
(unknown stack trace)

# TickObject
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/message_stream.js:137 - callback();
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/message_stream.js:33  - processIncomingData(this, callback);

# TickObject
(unknown stack trace)
FUCK
AFFTER2 END

  Requests
BEFORE START
    1) "before all" hook in "Requests"
AFTER START
There are 85 handle(s) keeping the process running

# DNSCHANNEL
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/connection_string.js:4 - const dns = require("dns");
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:6      - const connection_string_1 = require("./connection_string");
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/change_stream.js:10    - const mongo_client_1 = require("./mongo_client");
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/index.js:9             - const change_stream_1 = require("./change_stream");
/home/tom/Projects/Lighten/buttress-js/dist/routes/index.js:24                         - const ObjectId = require('mongodb').ObjectId;
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:36                       - const Routes = require('./routes');
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:24           - const BootstrapRest = require('../../../dist/bootstrap-rest');

# TCPWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connect.js:296         - socket = net.createConnection(parseConnectOptions(options));
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connect.js:31          - makeConnection({ ...options, existingSocket: undefined }, (err, socket) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:345 - (0, connect_1.connect)(connectOptions, (err, connection) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:446 - this.createConnection((err, connection) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:168 - process.nextTick(() => this.processWaitQueue());

# TCPWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connect.js:296         - socket = net.createConnection(parseConnectOptions(options));
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connect.js:31          - makeConnection({ ...options, existingSocket: undefined }, (err, socket) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:345 - (0, connect_1.connect)(connectOptions, (err, connection) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:446 - this.createConnection((err, connection) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:168 - process.nextTick(() => this.processWaitQueue());

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:37             - const req = await fetch(`${opts.url}?token=${token}`, opts);
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:42             - const createApp = async (name, apiPath, token) => await bjsReq({
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:99             - testEnv.apps.app1 = await createApp('Test App 1', 'test-app-1');

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TCPWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connect.js:296         - socket = net.createConnection(parseConnectOptions(options));
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connect.js:31          - makeConnection({ ...options, existingSocket: undefined }, (err, socket) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:345 - (0, connect_1.connect)(connectOptions, (err, connection) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:446 - this.createConnection((err, connection) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:168 - process.nextTick(() => this.processWaitQueue());

# TCPWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connect.js:296         - socket = net.createConnection(parseConnectOptions(options));
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connect.js:31          - makeConnection({ ...options, existingSocket: undefined }, (err, socket) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:345 - (0, connect_1.connect)(connectOptions, (err, connection) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:446 - this.createConnection((err, connection) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:168 - process.nextTick(() => this.processWaitQueue());

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:37             - const req = await fetch(`${opts.url}?token=${token}`, opts);
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:51             - const updateSchema = async (schema, token) => bjsReq({
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:100            - testEnv.apps.app1.schema = await updateSchema([carsSchema], testEnv.apps.app1.token);

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:37             - const req = await fetch(`${opts.url}?token=${token}`, opts);
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:65             - const [car] = await bjsReq({
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:102            - await createCar(testEnv.apps.app1, 'A red car');

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:37             - const req = await fetch(`${opts.url}?token=${token}`, opts);
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:42             - const createApp = async (name, apiPath, token) => await bjsReq({
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:105            - testEnv.apps.app2 = await createApp('Test App 2', 'test-app-2');

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TCPWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connect.js:296         - socket = net.createConnection(parseConnectOptions(options));
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connect.js:31          - makeConnection({ ...options, existingSocket: undefined }, (err, socket) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:345 - (0, connect_1.connect)(connectOptions, (err, connection) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:446 - this.createConnection((err, connection) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:168 - process.nextTick(() => this.processWaitQueue());

# TCPWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connect.js:296         - socket = net.createConnection(parseConnectOptions(options));
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connect.js:31          - makeConnection({ ...options, existingSocket: undefined }, (err, socket) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:345 - (0, connect_1.connect)(connectOptions, (err, connection) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:446 - this.createConnection((err, connection) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:168 - process.nextTick(() => this.processWaitQueue());

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:37             - const req = await fetch(`${opts.url}?token=${token}`, opts);
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:42             - const createApp = async (name, apiPath, token) => await bjsReq({
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:108            - testEnv.apps.app3 = await createApp('Test App 3', 'test-app-3');

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:37             - const req = await fetch(`${opts.url}?token=${token}`, opts);
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:51             - const updateSchema = async (schema, token) => bjsReq({
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:109            - testEnv.apps.app3.schema = await updateSchema([carsSchema], testEnv.apps.app3.token);

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:37             - const req = await fetch(`${opts.url}?token=${token}`, opts);
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:65             - const [car] = await bjsReq({
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:111            - await createCar(testEnv.apps.app3, 'A green car');

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:37             - const req = await fetch(`${opts.url}?token=${token}`, opts);
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:57             - const registerDataSharing = async (agreement, token) => bjsReq({
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:127            - const agreement = await registerDataSharing({

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:37             - const req = await fetch(`${opts.url}?token=${token}`, opts);
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:57             - const registerDataSharing = async (agreement, token) => bjsReq({
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:157            - const agreement = await registerDataSharing({

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:168      - return fetch(url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/app.js:37          - return this._request('get', 'schema', options);
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/buttressjs.js:110  - .then(() => this.getCollection('app').getSchema())
/home/tom/Projects/Lighten/buttress-js/dist/datastore/adapters/buttress.js:55            - await this.connection.init({
/home/tom/Projects/Lighten/buttress-js/dist/routes/api/app-data-sharing.js:49            - await buttressAdapter.connect();
/home/tom/Projects/Lighten/buttress-js/dist/routes/api/app-data-sharing.js:202           - return await activateDataSharing(dataSharing, result.token._id);
/home/tom/Projects/Lighten/buttress-js/dist/routes/route.js:145                          - const result = await this._exec(req, res, validate);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468             - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437             - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10     - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:168          - return fetch(url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/app-data-sharing.js:59 - return this._request('post', `activate`, options);
/home/tom/Projects/Lighten/buttress-js/dist/datastore/adapters/buttress.js:99                - return await this.connection.AppDataSharing.activate(registrationToken, newToken);
/home/tom/Projects/Lighten/buttress-js/dist/routes/api/app-data-sharing.js:52                - const activationResult = await buttressAdapter.activateDataSharing(dataSharing.remoteApp.token, newToken);
/home/tom/Projects/Lighten/buttress-js/dist/routes/api/app-data-sharing.js:202               - return await activateDataSharing(dataSharing, result.token._id);
/home/tom/Projects/Lighten/buttress-js/dist/routes/route.js:145                              - const result = await this._exec(req, res, validate);

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:168      - return fetch(url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/app.js:37          - return this._request('get', 'schema', options);
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/buttressjs.js:110  - .then(() => this.getCollection('app').getSchema())
/home/tom/Projects/Lighten/buttress-js/dist/datastore/adapters/buttress.js:55            - await this.connection.init({
/home/tom/Projects/Lighten/buttress-js/dist/routes/api/app-data-sharing.js:71            - await datastore.connect();
/home/tom/Projects/Lighten/buttress-js/dist/routes/api/app-data-sharing.js:202           - return await activateDataSharing(dataSharing, result.token._id);
/home/tom/Projects/Lighten/buttress-js/dist/routes/route.js:145                          - const result = await this._exec(req, res, validate);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:37             - const req = await fetch(`${opts.url}?token=${token}`, opts);
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:51             - const updateSchema = async (schema, token) => bjsReq({
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:184            - testEnv.apps.app2.schema = await updateSchema([{

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:168      - return fetch(url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/app.js:37          - return this._request('get', 'schema', options);
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/buttressjs.js:110  - .then(() => this.getCollection('app').getSchema())
/home/tom/Projects/Lighten/buttress-js/dist/datastore/adapters/buttress.js:55            - await this.connection.init({
/home/tom/Projects/Lighten/buttress-js/dist/model/type/remote.js:54                      - await model.adapter.connect();
/home/tom/Projects/Lighten/buttress-js/dist/model/index.js:211                           - await this.models[modelName].initAdapter(mainDatastore, datastores);
/home/tom/Projects/Lighten/buttress-js/dist/model/index.js:109                           - await this._initSchemaModel(app, schema, datastore);
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:237                        - await Model.initSchema(payload.appId);
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:229                        - await this.handleProcessMessage(payload);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:168      - return fetch(url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/app.js:37          - return this._request('get', 'schema', options);
/home/tom/Projects/Lighten/buttress-js/dist/datastore/adapters/buttress.js:90            - return await this.connection.App.getSchema({
/home/tom/Projects/Lighten/buttress-js/dist/model/type/remote.js:59                      - const remoteSchemas = await model.adapter.getSchema([this.schemaData.name]);
/home/tom/Projects/Lighten/buttress-js/dist/model/index.js:211                           - await this.models[modelName].initAdapter(mainDatastore, datastores);
/home/tom/Projects/Lighten/buttress-js/dist/model/index.js:109                           - await this._initSchemaModel(app, schema, datastore);
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:237                        - await Model.initSchema(payload.appId);
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:229                        - await this.handleProcessMessage(payload);

# Timeout
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/monitor.js:274 - this[kMonitorId] = (0, timers_1.setTimeout)(() => measureRoundTripTime(this, options), heartbeatFrequencyMS);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/monitor.js:175 - monitor[kRTTPinger] = new RTTPinger(monitor[kCancellationToken], Object.assign({ heartbeatFrequencyMS: monitor.options.heartbeatFrequencyMS }, monitor.connectOptions));
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/monitor.js:237 - checkServer(monitor, (err, hello) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/utils.js:652        - fn(err => {

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:37             - const req = await fetch(`${opts.url}?token=${token}`, opts);
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:206            - const cars = await bjsReq({

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:168      - return fetch(url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:318      - return this._request('search', null, options);
/home/tom/Projects/Lighten/buttress-js/dist/datastore/adapters/buttress.js:230           - const result = await this.collection.search(query, limit, skip, sort, {
/home/tom/Projects/Lighten/buttress-js/dist/model/type/remote.js:180                     - sources.push(await remote.find(query, excludes, limit, skip, sort, project));
/home/tom/Projects/Lighten/buttress-js/dist/routes/route.js:145                          - const result = await this._exec(req, res, validate);

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:37             - const req = await fetch(`${opts.url}?token=${token}`, opts);
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:57             - const registerDataSharing = async (agreement, token) => bjsReq({
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:264            - const agreement = await registerDataSharing({

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:37             - const req = await fetch(`${opts.url}?token=${token}`, opts);
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:57             - const registerDataSharing = async (agreement, token) => bjsReq({
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:294            - const agreement = await registerDataSharing({

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:168      - return fetch(url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/app.js:37          - return this._request('get', 'schema', options);
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/buttressjs.js:110  - .then(() => this.getCollection('app').getSchema())
/home/tom/Projects/Lighten/buttress-js/dist/datastore/adapters/buttress.js:55            - await this.connection.init({
/home/tom/Projects/Lighten/buttress-js/dist/routes/api/app-data-sharing.js:49            - await buttressAdapter.connect();
/home/tom/Projects/Lighten/buttress-js/dist/routes/api/app-data-sharing.js:202           - return await activateDataSharing(dataSharing, result.token._id);
/home/tom/Projects/Lighten/buttress-js/dist/routes/route.js:145                          - const result = await this._exec(req, res, validate);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468             - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437             - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10     - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:168          - return fetch(url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/app-data-sharing.js:59 - return this._request('post', `activate`, options);
/home/tom/Projects/Lighten/buttress-js/dist/datastore/adapters/buttress.js:99                - return await this.connection.AppDataSharing.activate(registrationToken, newToken);
/home/tom/Projects/Lighten/buttress-js/dist/routes/api/app-data-sharing.js:52                - const activationResult = await buttressAdapter.activateDataSharing(dataSharing.remoteApp.token, newToken);
/home/tom/Projects/Lighten/buttress-js/dist/routes/api/app-data-sharing.js:202               - return await activateDataSharing(dataSharing, result.token._id);
/home/tom/Projects/Lighten/buttress-js/dist/routes/route.js:145                              - const result = await this._exec(req, res, validate);

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:168      - return fetch(url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/app.js:37          - return this._request('get', 'schema', options);
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/buttressjs.js:110  - .then(() => this.getCollection('app').getSchema())
/home/tom/Projects/Lighten/buttress-js/dist/datastore/adapters/buttress.js:55            - await this.connection.init({
/home/tom/Projects/Lighten/buttress-js/dist/routes/api/app-data-sharing.js:71            - await datastore.connect();
/home/tom/Projects/Lighten/buttress-js/dist/routes/api/app-data-sharing.js:202           - return await activateDataSharing(dataSharing, result.token._id);
/home/tom/Projects/Lighten/buttress-js/dist/routes/route.js:145                          - const result = await this._exec(req, res, validate);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:37             - const req = await fetch(`${opts.url}?token=${token}`, opts);
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:51             - const updateSchema = async (schema, token) => bjsReq({
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:321            - testEnv.apps.app2.schema = await updateSchema([{

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:168      - return fetch(url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/app.js:37          - return this._request('get', 'schema', options);
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/buttressjs.js:110  - .then(() => this.getCollection('app').getSchema())
/home/tom/Projects/Lighten/buttress-js/dist/datastore/adapters/buttress.js:55            - await this.connection.init({
/home/tom/Projects/Lighten/buttress-js/dist/model/type/remote.js:54                      - await model.adapter.connect();
/home/tom/Projects/Lighten/buttress-js/dist/model/index.js:211                           - await this.models[modelName].initAdapter(mainDatastore, datastores);
/home/tom/Projects/Lighten/buttress-js/dist/model/index.js:109                           - await this._initSchemaModel(app, schema, datastore);
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:237                        - await Model.initSchema(payload.appId);
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:229                        - await this.handleProcessMessage(payload);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:168      - return fetch(url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/app.js:37          - return this._request('get', 'schema', options);
/home/tom/Projects/Lighten/buttress-js/dist/datastore/adapters/buttress.js:90            - return await this.connection.App.getSchema({
/home/tom/Projects/Lighten/buttress-js/dist/model/type/remote.js:59                      - const remoteSchemas = await model.adapter.getSchema([this.schemaData.name]);
/home/tom/Projects/Lighten/buttress-js/dist/model/index.js:211                           - await this.models[modelName].initAdapter(mainDatastore, datastores);
/home/tom/Projects/Lighten/buttress-js/dist/model/index.js:109                           - await this._initSchemaModel(app, schema, datastore);
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:237                        - await Model.initSchema(payload.appId);
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:229                        - await this.handleProcessMessage(payload);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:168      - return fetch(url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/app.js:37          - return this._request('get', 'schema', options);
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/buttressjs.js:110  - .then(() => this.getCollection('app').getSchema())
/home/tom/Projects/Lighten/buttress-js/dist/datastore/adapters/buttress.js:55            - await this.connection.init({
/home/tom/Projects/Lighten/buttress-js/dist/model/type/remote.js:54                      - await model.adapter.connect();
/home/tom/Projects/Lighten/buttress-js/dist/model/index.js:211                           - await this.models[modelName].initAdapter(mainDatastore, datastores);
/home/tom/Projects/Lighten/buttress-js/dist/model/index.js:109                           - await this._initSchemaModel(app, schema, datastore);
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:237                        - await Model.initSchema(payload.appId);
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:229                        - await this.handleProcessMessage(payload);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:168      - return fetch(url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/app.js:37          - return this._request('get', 'schema', options);
/home/tom/Projects/Lighten/buttress-js/dist/datastore/adapters/buttress.js:90            - return await this.connection.App.getSchema({
/home/tom/Projects/Lighten/buttress-js/dist/model/type/remote.js:59                      - const remoteSchemas = await model.adapter.getSchema([this.schemaData.name]);
/home/tom/Projects/Lighten/buttress-js/dist/model/index.js:211                           - await this.models[modelName].initAdapter(mainDatastore, datastores);
/home/tom/Projects/Lighten/buttress-js/dist/model/index.js:109                           - await this._initSchemaModel(app, schema, datastore);
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:237                        - await Model.initSchema(payload.appId);
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:229                        - await this.handleProcessMessage(payload);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:37             - const req = await fetch(`${opts.url}?token=${token}`, opts);
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:347            - const cars = await bjsReq({

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:168      - return fetch(url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:318      - return this._request('search', null, options);
/home/tom/Projects/Lighten/buttress-js/dist/datastore/adapters/buttress.js:230           - const result = await this.collection.search(query, limit, skip, sort, {
/home/tom/Projects/Lighten/buttress-js/dist/model/type/remote.js:180                     - sources.push(await remote.find(query, excludes, limit, skip, sort, project));
/home/tom/Projects/Lighten/buttress-js/dist/routes/route.js:145                          - const result = await this._exec(req, res, validate);

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TLSWRAP
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1468         - const req = send(options);
/home/tom/Projects/Lighten/buttress-js/node_modules/node-fetch/lib/index.js:1437         - return new fetch.Promise(function (resolve, reject) {
/home/tom/Projects/Lighten/buttress-js/node_modules/cross-fetch/dist/node-ponyfill.js:10 - return realFetch.call(this, url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:168      - return fetch(url, options)
/home/tom/Projects/Lighten/buttress-js/node_modules/@buttress/api/lib/schema.js:318      - return this._request('search', null, options);
/home/tom/Projects/Lighten/buttress-js/dist/datastore/adapters/buttress.js:230           - const result = await this.collection.search(query, limit, skip, sort, {
/home/tom/Projects/Lighten/buttress-js/dist/model/type/remote.js:180                     - sources.push(await remote.find(query, excludes, limit, skip, sort, project));
/home/tom/Projects/Lighten/buttress-js/dist/routes/route.js:145                          - const result = await this._exec(req, res, validate);

# bound-anonymous-fn
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:319              - res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')
/home/tom/Projects/Lighten/buttress-js/node_modules/raw-body/index.js:109              - return readStream(stream, encoding, length, limit, wrap(done))
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/read.js:79         - getBody(stream, opts, function (error, body) {
/home/tom/Projects/Lighten/buttress-js/node_modules/body-parser/lib/types/json.js:135  - read(req, res, next, parse, debug, {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/init.js:40  - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/middleware/query.js:45 - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/layer.js:95     - fn(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:328    - layer.handle_request(req, res, next);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:286    - trim_prefix(layer, layerError, layerPath, path)
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:346    - return done();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:280    - self.process_params(layer, paramcalled, req, res, function (err) {
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/router/index.js:175    - next();
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/application.js:181     - router.handle(req, res, done);
/home/tom/Projects/Lighten/buttress-js/node_modules/express/lib/express.js:39          - app.handle(req, res, next);

# TickObject
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:116 - console.log('AFFTER2 START');

# TickObject
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:116             - this._restServer.close((err) => (err) ? process.exit(1) : Logging.logSilly(`Express server closed`));
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:120 - await REST_PROCESS.clean();

# TickObject
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/index.js:950                             - this.should_buffer = !this.stream.write(data);
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/index.js:886                             - this.write(command_str);
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/lib/individualCommands.js:105            - var backpressure_indicator = this.internal_send_command(new Command('quit', [], quit_callback(this, callback)));
/home/tom/Projects/Lighten/buttress-js/node_modules/node-redis-pubsub/lib/node-redis-pubsub.js:126 - this.emitter.quit();
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:122                                  - this._nrp.quit();
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:120                      - await REST_PROCESS.clean();

# TickObject
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/index.js:950                             - this.should_buffer = !this.stream.write(data);
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/index.js:886                             - this.write(command_str);
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/lib/individualCommands.js:105            - var backpressure_indicator = this.internal_send_command(new Command('quit', [], quit_callback(this, callback)));
/home/tom/Projects/Lighten/buttress-js/node_modules/node-redis-pubsub/lib/node-redis-pubsub.js:127 - this.receiver.quit();
/home/tom/Projects/Lighten/buttress-js/dist/bootstrap-rest.js:122                                  - this._nrp.quit();
/home/tom/Projects/Lighten/buttress-js/test/e2e/rest/data-sharing.test.js:120                      - await REST_PROCESS.clean();


# Timeout
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:290                - waitQueueMember.timer = (0, timers_1.setTimeout)(() => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/operations/execute_operation.js:154 - topology.selectServer(selector, serverSelectionOptions, (error, server) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/operations/execute_operation.js:69  - executeWithServerSelection(topology, session, operation, (error, result) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/utils.js:357                        - wrapper((err, res) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/operations/execute_operation.js:16  - return (0, utils_1.maybePromise)(callback, callback => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/db.js:162                           - return (0, execute_operation_1.executeOperation)(this.s.client, new run_command_1.RunCommandOperation(this, command, options !== null && options !== void 0 ? options : {}), callback);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:179                 - .command({ endSessions }, { readPreference: read_preference_1.ReadPreference.primaryPreferred, noResponse: true })

# TickObject
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:168         - process.nextTick(() => this.processWaitQueue());
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:291         - this.checkOut((err, conn) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/server.js:204                  - this.s.pool.withConnection(conn, (err, conn, cb) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/operations/command.js:91            - server.command(this.ns, cmd, options, callback);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/operations/run_command.js:15        - this.executeCommand(server, session, command, callback);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/operations/execute_operation.js:182 - return operation.execute(server, session, callback);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:594                - waitQueueMember.callback(undefined, selectedServer);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:298                - processWaitQueue(this);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/operations/execute_operation.js:154 - topology.selectServer(selector, serverSelectionOptions, (error, server) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/operations/execute_operation.js:69  - executeWithServerSelection(topology, session, operation, (error, result) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/utils.js:357                        - wrapper((err, res) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/operations/execute_operation.js:16  - return (0, utils_1.maybePromise)(callback, callback => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/db.js:162                           - return (0, execute_operation_1.executeOperation)(this.s.client, new run_command_1.RunCommandOperation(this, command, options !== null && options !== void 0 ? options : {}), callback);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:179                 - .command({ endSessions }, { readPreference: read_preference_1.ReadPreference.primaryPreferred, noResponse: true })

# TickObject
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/message_stream.js:47   - this.push(Array.isArray(data) ? Buffer.concat(data) : data);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection.js:456      - conn[kMessageStream].writeCommand(command, operationDescription);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection.js:299      - write(this, message, commandOptions, callback);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/server.js:210          - conn.command(ns, cmd, finalOptions, makeOperationHandler(this, conn, cmd, finalOptions, (error, response) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:293 - fn(err, conn, (fnErr, result) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:435 - waitQueueMember.callback(undefined, connection);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:168 - process.nextTick(() => this.processWaitQueue());

# TickObject
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/message_stream.js:47   - this.push(Array.isArray(data) ? Buffer.concat(data) : data);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection.js:456      - conn[kMessageStream].writeCommand(command, operationDescription);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection.js:299      - write(this, message, commandOptions, callback);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/server.js:210          - conn.command(ns, cmd, finalOptions, makeOperationHandler(this, conn, cmd, finalOptions, (error, response) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:293 - fn(err, conn, (fnErr, result) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:435 - waitQueueMember.callback(undefined, connection);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:168 - process.nextTick(() => this.processWaitQueue());

# TickObject
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:189 - process.nextTick(() => this.processWaitQueue());
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:303 - this.checkIn(conn);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/server.js:212          - cb(error, response);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/server.js:287          - return callback(new error_1.MongoUnexpectedServerResponseError('Empty response with no error'));
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection.js:466      - operationDescription.cb();
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection.js:299      - write(this, message, commandOptions, callback);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/server.js:210          - conn.command(ns, cmd, finalOptions, makeOperationHandler(this, conn, cmd, finalOptions, (error, response) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:293 - fn(err, conn, (fnErr, result) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:435 - waitQueueMember.callback(undefined, connection);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:168 - process.nextTick(() => this.processWaitQueue());

# TickObject
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection.js:237 - this[kStream].destroy();
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/monitor.js:140    - (_c = monitor[kConnection]) === null || _c === void 0 ? void 0 : _c.destroy({ force: true });
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/monitor.js:126    - resetMonitorState(this);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/server.js:128     - (_a = this[kMonitor]) === null || _a === void 0 ? void 0 : _a.close();
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:446   - server.destroy(options, () => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:227   - return (0, util_1.promisify)(destroyServer)(server, this, options);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:226   - const destroyedServers = Array.from(this.s.servers.values(), server => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:190    - topology.close({ force }, error => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:189    - return new Promise((resolve, reject) => {

# TickObject
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection.js:244      - this[kStream].end(() => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:255 - conn.destroy(options, cb);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/utils.js:448                - eachFn(arr[idx], eachCallback);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:253 - (0, utils_1.eachAsync)(this[kConnections].toArray(), (conn, cb) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/server.js:130          - this.s.pool.close(options, err => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:446        - server.destroy(options, () => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:227        - return (0, util_1.promisify)(destroyServer)(server, this, options);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:226        - const destroyedServers = Array.from(this.s.servers.values(), server => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:190         - topology.close({ force }, error => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:189         - return new Promise((resolve, reject) => {

# TickObject
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection.js:244      - this[kStream].end(() => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:255 - conn.destroy(options, cb);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/utils.js:448                - eachFn(arr[idx], eachCallback);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:253 - (0, utils_1.eachAsync)(this[kConnections].toArray(), (conn, cb) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/server.js:130          - this.s.pool.close(options, err => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:446        - server.destroy(options, () => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:227        - return (0, util_1.promisify)(destroyServer)(server, this, options);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:226        - const destroyedServers = Array.from(this.s.servers.values(), server => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:190         - topology.close({ force }, error => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:189         - return new Promise((resolve, reject) => {

# TickObject
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection.js:244      - this[kStream].end(() => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:255 - conn.destroy(options, cb);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/utils.js:448                - eachFn(arr[idx], eachCallback);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:253 - (0, utils_1.eachAsync)(this[kConnections].toArray(), (conn, cb) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/server.js:130          - this.s.pool.close(options, err => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:446        - server.destroy(options, () => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:227        - return (0, util_1.promisify)(destroyServer)(server, this, options);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:226        - const destroyedServers = Array.from(this.s.servers.values(), server => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:190         - topology.close({ force }, error => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:189         - return new Promise((resolve, reject) => {

# TickObject
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection.js:244      - this[kStream].end(() => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:255 - conn.destroy(options, cb);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/utils.js:448                - eachFn(arr[idx], eachCallback);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:253 - (0, utils_1.eachAsync)(this[kConnections].toArray(), (conn, cb) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/server.js:130          - this.s.pool.close(options, err => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:446        - server.destroy(options, () => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:227        - return (0, util_1.promisify)(destroyServer)(server, this, options);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:226        - const destroyedServers = Array.from(this.s.servers.values(), server => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:190         - topology.close({ force }, error => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:189         - return new Promise((resolve, reject) => {

# TickObject
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection.js:244      - this[kStream].end(() => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:255 - conn.destroy(options, cb);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/utils.js:448                - eachFn(arr[idx], eachCallback);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:253 - (0, utils_1.eachAsync)(this[kConnections].toArray(), (conn, cb) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/server.js:130          - this.s.pool.close(options, err => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:446        - server.destroy(options, () => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:227        - return (0, util_1.promisify)(destroyServer)(server, this, options);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:226        - const destroyedServers = Array.from(this.s.servers.values(), server => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:190         - topology.close({ force }, error => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:189         - return new Promise((resolve, reject) => {

# TickObject
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection.js:244      - this[kStream].end(() => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:255 - conn.destroy(options, cb);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/utils.js:448                - eachFn(arr[idx], eachCallback);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/connection_pool.js:253 - (0, utils_1.eachAsync)(this[kConnections].toArray(), (conn, cb) => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/server.js:130          - this.s.pool.close(options, err => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:446        - server.destroy(options, () => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:227        - return (0, util_1.promisify)(destroyServer)(server, this, options);
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/sdam/topology.js:226        - const destroyedServers = Array.from(this.s.servers.values(), server => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:190         - topology.close({ force }, error => {
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/mongo_client.js:189         - return new Promise((resolve, reject) => {

# SHUTDOWNWRAP
(unknown stack trace)

# SHUTDOWNWRAP
(unknown stack trace)

# SHUTDOWNWRAP
(unknown stack trace)

# SHUTDOWNWRAP
(unknown stack trace)

# SHUTDOWNWRAP
(unknown stack trace)

# SHUTDOWNWRAP
(unknown stack trace)

# TickObject
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/lib/individualCommands.js:96 - self.stream.destroy();
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/index.js:655                 - command_obj.callback(null, reply);
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/index.js:753                 - normal_reply(this, reply);
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/index.js:138                 - self.return_reply(data);
/home/tom/Projects/Lighten/buttress-js/node_modules/redis-parser/lib/parser.js:544     - this.returnReply(response)
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/index.js:219                 - self.reply_parser.execute(buffer_from_socket);

# TickObject
(unknown stack trace)

# TickObject
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/lib/individualCommands.js:96 - self.stream.destroy();
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/index.js:655                 - command_obj.callback(null, reply);
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/index.js:760                 - normal_reply(this, reply);
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/index.js:138                 - self.return_reply(data);
/home/tom/Projects/Lighten/buttress-js/node_modules/redis-parser/lib/parser.js:544     - this.returnReply(response)
/home/tom/Projects/Lighten/buttress-js/node_modules/redis/index.js:219                 - self.reply_parser.execute(buffer_from_socket);

# TickObject
(unknown stack trace)

# TickObject
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/message_stream.js:137 - callback();
/home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/cmap/message_stream.js:33  - processIncomingData(this, callback);

# TickObject
(unknown stack trace)
FUCK
AFTER END


  8 passing (2s)
  1 failing

  1) Requests
       "before all" hook in "Requests":
     MongoNotConnectedError: Client must be connected before running operations
      at /home/tom/Projects/Lighten/buttress-js/node_modules/mongodb/lib/operations/execute_operation.js:20:33
      at maybePromise (node_modules/mongodb/lib/utils.js:357:5)
      at executeOperation (node_modules/mongodb/lib/operations/execute_operation.js:16:37)
      at Collection.countDocuments (node_modules/mongodb/lib/collection.js:318:57)
      at MongodbAdapter.count (dist/datastore/adapters/mongodb.js:425:26)
      at AppSchemaModel.count (dist/model/type/standard.js:508:23)
      at BootstrapRest.__systemInstall (dist/bootstrap-rest.js:265:36)
      at BootstrapRest.__initMaster (dist/bootstrap-rest.js:171:15)
      at runMicrotasks (<anonymous>)
      at processTicksAndRejections (internal/process/task_queues.js:95:5)
      at async BootstrapRest.init (dist/bootstrap-rest.js:80:4)
      at async Context.<anonymous> (test/e2e/sock/requests.js:42:3)



